{"mappings":"AAAAA,SAASC,iBAAiB,oBAAoB,KAC5C,MAAMC,EAAOF,SAASG,eAAe,eAC/BC,EAAUJ,SAASK,cAAc,YACjCC,EAAcN,SAASK,cAAc,cAI3C,IAAIE,EAAc,EACdC,EAAqB,GACrBC,EAAY,EACZC,EAAa,EACbC,EAAc,GA0BlBC,eAAeC,EAAaC,EAAOC,GACjC,MAAMC,EAAM,qEAAgCC,mBAC1CH,mEACgEC,gBAClE,IACE,MAAMG,QAAiBC,MAAMC,IAAIJ,IAC3BK,KAAEA,GAASH,EACjBT,EAAYY,EAAKZ,UAEQ,IAArBY,EAAKC,KAAKC,QACQ,IAAhBhB,IACFH,EAAQoB,UAAY,IAEtBC,EACE,8EAGkB,IAAhBlB,IACFH,EAAQoB,UAAY,IAEtBH,EAAKC,KAAKI,SAASC,IACjB,MAAMC,EAmBd,SAAyBD,GACvB,MAAMC,EAAO5B,SAAS6B,cAAc,OACpCD,EAAKE,UAAUC,IAAI,cAEnB,MAAMC,EAAMhC,SAAS6B,cAAc,OACnCG,EAAIC,IAAMN,EAAMO,aAChBF,EAAIG,IAAMR,EAAMS,KAChBJ,EAAIK,QAAU,OAEd,MAAMC,EAAOtC,SAAS6B,cAAc,OACpCS,EAAKR,UAAUC,IAAI,QAEnB,MAAMQ,EAAQC,EAAe,QAASb,EAAMY,OACtCE,EAAQD,EAAe,QAASb,EAAMc,OACtCC,EAAWF,EAAe,WAAYb,EAAMe,UAC5CC,EAAYH,EAAe,YAAab,EAAMgB,WAUpD,OARAL,EAAKM,YAAYL,GACjBD,EAAKM,YAAYH,GACjBH,EAAKM,YAAYF,GACjBJ,EAAKM,YAAYD,GAEjBf,EAAKgB,YAAYZ,GACjBJ,EAAKgB,YAAYN,GAEVV,C,CA5CYiB,CAAgBlB,GAC7BvB,EAAQwC,YAAYhB,EAAK,IAqDLL,EAnDHF,EAAKC,KAAKC,OAqDjCjB,EAAYwC,MAAMC,QADhBxB,EA3Ga,GA4Ga,OAEA,SApD1Bb,EAAasC,KAAKC,KAAKxC,EA1DV,IA6DXH,EAAYwC,MAAMC,QADhBxC,GAAeG,EACW,OAEA,O,CAE9B,MAAOwC,GACPC,QAAQD,MAAMA,GACdzB,EAAiB,mE,CAuCrB,IAA4BF,C,CAP5B,SAASiB,EAAeY,EAAOC,GAC7B,MAAMC,EAAOtD,SAAS6B,cAAc,KAGpC,OAFAyB,EAAKxB,UAAUC,IAAI,aACnBuB,EAAK9B,UAAY,MAAM4B,eAAmBC,WACnCC,C,CAYT,SAAS7B,EAAiB8B,GACxBC,SAASC,OAAOC,QAAQH,E,CA7G1BjD,EAAYwC,MAAMC,QAAU,OAE5B7C,EAAKD,iBAAiB,UAAUW,MAAO+C,IACrCA,EAAEC,iBACFjD,EAAcgD,EAAEE,OAAOC,SAASnD,YAAY0C,MAAMU,OAC9CpD,IACFH,EAAqBG,EACrBJ,EAAc,EACdE,EAAY,EACZL,EAAQoB,UAAY,SACdX,EAAaF,EAAaJ,G,IAIpCD,EAAYL,iBAAiB,SAASW,UACpCL,IACAA,EAAcyC,KAAKgB,IAAIzD,EAAaG,GACpC,UACQG,EAAaL,EAAoBD,E,CACvC,MAAO2C,GACPC,QAAQD,MAAMA,E","sources":["src/index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '37312100-865d32ca69dd36d98aea990c9';\n  const PER_PAGE = 40;\n  let currentPage = 1;\n  let currentSearchQuery = '';\n  let totalHits = 0;\n  let totalPages = 0;\n  let searchQuery = ''; \n\n  loadMoreBtn.style.display = 'none';\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    searchQuery = e.target.elements.searchQuery.value.trim(); \n    if (searchQuery) {\n      currentSearchQuery = searchQuery;\n      currentPage = 1;\n      totalHits = 0;\n      gallery.innerHTML = '';\n      await searchImages(searchQuery, currentPage);\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    currentPage = Math.min(currentPage, totalPages);\n    try {\n      await searchImages(currentSearchQuery, currentPage); \n    } catch (error) {\n      console.error(error);\n    }\n  });\n\n  async function searchImages(query, page) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`;\n    try {\n      const response = await axios.get(url);\n      const { data } = response;\n      totalHits = data.totalHits;\n\n      if (data.hits.length === 0) {\n        if (currentPage === 1) {\n          gallery.innerHTML = '';\n        }\n        showNotification(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      } else {\n        if (currentPage === 1) {\n          gallery.innerHTML = '';\n        }\n        data.hits.forEach((image) => {\n          const card = createImageCard(image);\n          gallery.appendChild(card);\n        });\n        showLoadMoreButton(data.hits.length);\n      }\n\n      totalPages = Math.ceil(totalHits / PER_PAGE); \n\n      if (currentPage >= totalPages) {\n        loadMoreBtn.style.display = 'none'; \n      } else {\n        loadMoreBtn.style.display = 'block'; \n      }\n    } catch (error) {\n      console.error(error);\n      showNotification('An error occurred while fetching images. Please try again later.');\n    }\n  }\n\n  function createImageCard(image) {\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likes = createInfoItem('Likes', image.likes);\n    const views = createInfoItem('Views', image.views);\n    const comments = createInfoItem('Comments', image.comments);\n    const downloads = createInfoItem('Downloads', image.downloads);\n\n    info.appendChild(likes);\n    info.appendChild(views);\n    info.appendChild(comments);\n    info.appendChild(downloads);\n\n    card.appendChild(img);\n    card.appendChild(info);\n\n    return card;\n  }\n\n  function createInfoItem(label, value) {\n    const item = document.createElement('p');\n    item.classList.add('info-item');\n    item.innerHTML = `<b>${label}</b> <span>${value}</span>`;\n    return item;\n  }\n\n  function showLoadMoreButton(length) {\n  if (length < PER_PAGE) {\n    loadMoreBtn.style.display = 'none'; \n  } else {\n    loadMoreBtn.style.display = 'block'; \n  }\n}\n  \n\n  function showNotification(message) {\n    Notiflix.Notify.failure(message);\n  }\n});"],"names":["document","addEventListener","form","getElementById","gallery","querySelector","loadMoreBtn","currentPage","currentSearchQuery","totalHits","totalPages","searchQuery","async","searchImages","query","page","url","encodeURIComponent","response","axios","get","data","hits","length","innerHTML","showNotification","forEach","image","card","createElement","classList","add","img","src","webformatURL","alt","tags","loading","info","likes","createInfoItem","views","comments","downloads","appendChild","createImageCard","style","display","Math","ceil","error","console","label","value","item","message","Notiflix","Notify","failure","e","preventDefault","target","elements","trim","min"],"version":3,"file":"index.aad3b7fa.js.map"}
{"mappings":"AAAAA,SAASC,iBAAiB,oBAAoB,KAC5C,MAAMC,EAAOF,SAASG,eAAe,eAC/BC,EAAUJ,SAASK,cAAc,YACjCC,EAAcN,SAASK,cAAc,cAI3C,IAAIE,EAAc,EACdC,EAAqB,GACrBC,EAAY,EAqBhBC,eAAeC,EAAaC,EAAOC,GACjC,MAAMC,EAAM,qEAAgCC,mBAC1CH,mEACgEC,gBAClE,IACE,MAAMG,QAAiBC,MAAMC,IAAIJ,IAC3BK,KAAEA,GAASH,EACjBP,EAAYU,EAAKV,UAEQ,IAArBU,EAAKC,KAAKC,QACQ,IAAhBd,IACFH,EAAQkB,UAAY,IAEtBC,EACE,8EAGkB,IAAhBhB,IACFH,EAAQkB,UAAY,IAEtBH,EAAKC,KAAKI,SAASC,IACjB,MAAMC,EAad,SAAyBD,GACvB,MAAMC,EAAO1B,SAAS2B,cAAc,OACpCD,EAAKE,UAAUC,IAAI,cAEnB,MAAMC,EAAM9B,SAAS2B,cAAc,OACnCG,EAAIC,IAAMN,EAAMO,aAChBF,EAAIG,IAAMR,EAAMS,KAChBJ,EAAIK,QAAU,OAEd,MAAMC,EAAOpC,SAAS2B,cAAc,OACpCS,EAAKR,UAAUC,IAAI,QAEnB,MAAMQ,EAAQC,EAAe,QAASb,EAAMY,OACtCE,EAAQD,EAAe,QAASb,EAAMc,OACtCC,EAAWF,EAAe,WAAYb,EAAMe,UAC5CC,EAAYH,EAAe,YAAab,EAAMgB,WAUpD,OARAL,EAAKM,YAAYL,GACjBD,EAAKM,YAAYH,GACjBH,EAAKM,YAAYF,GACjBJ,EAAKM,YAAYD,GAEjBf,EAAKgB,YAAYZ,GACjBJ,EAAKgB,YAAYN,GAEVV,C,CAtCYiB,CAAgBlB,GAC7BrB,EAAQsC,YAAYhB,EAAK,KAsDLkB,EApDHzB,EAAKC,KAAKC,SAqDbZ,GAClBH,EAAYuC,MAAMC,QAAU,OACxBF,EAAe,GACjBrB,EAAiB,+DAGnBjB,EAAYuC,MAAMC,QAAU,O,CAzD5B,MAAOC,GACPC,QAAQD,MAAMA,GACdxB,EACE,mE,CA+CN,IAA4BqB,C,CAd5B,SAASN,EAAeW,EAAOC,GAC7B,MAAMC,EAAOnD,SAAS2B,cAAc,KACpCwB,EAAKvB,UAAUC,IAAI,aACnBsB,EAAK7B,UAAY,MAAM2B,eAAmBC,WAG1C,MAAME,EAAYD,EAAKE,wBAAwBC,MAK/C,OAFAH,EAAKN,MAAMU,SAAW,GAAGH,MAElBD,C,CAeT,SAAS5B,EAAiBiC,GACxBC,SAASC,OAAOC,QAAQH,E,CA5G1BlD,EAAYuC,MAAMC,QAAU,OAE5B5C,EAAKD,iBAAiB,UAAUS,MAAOkD,IACrCA,EAAEC,iBACF,MAAMC,EAAcF,EAAEG,OAAOC,SAASF,YAAYZ,MAAMe,OACpDH,IACFtD,EAAqBsD,EACrBvD,EAAc,EACdE,EAAY,EACZL,EAAQkB,UAAY,SACdX,EAAamD,EAAavD,G,IAIpCD,EAAYL,iBAAiB,SAASS,UACpCH,UACMI,EAAaH,EAAoBD,EAAY,G","sources":["src/index.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const form = document.getElementById('search-form');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '37312100-865d32ca69dd36d98aea990c9';\n  const PER_PAGE = 40;\n  let currentPage = 1;\n  let currentSearchQuery = '';\n  let totalHits = 0;\n\n  loadMoreBtn.style.display = 'none';\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const searchQuery = e.target.elements.searchQuery.value.trim();\n    if (searchQuery) {\n      currentSearchQuery = searchQuery;\n      currentPage = 1;\n      totalHits = 0;\n      gallery.innerHTML = '';\n      await searchImages(searchQuery, currentPage);\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    await searchImages(currentSearchQuery, currentPage);\n  });\n\n  async function searchImages(query, page) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n      query\n    )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`;\n    try {\n      const response = await axios.get(url);\n      const { data } = response;\n      totalHits = data.totalHits;\n\n      if (data.hits.length === 0) {\n        if (currentPage === 1) {\n          gallery.innerHTML = '';\n        }\n        showNotification(\n          'Sorry, there are no images matching your search query. Please try again.'\n        );\n      } else {\n        if (currentPage === 1) {\n          gallery.innerHTML = '';\n        }\n        data.hits.forEach((image) => {\n          const card = createImageCard(image);\n          gallery.appendChild(card);\n        });\n        showLoadMoreButton(data.hits.length);\n      }\n    } catch (error) {\n      console.error(error);\n      showNotification(\n        'An error occurred while fetching images. Please try again later.'\n      );\n    }\n  }\n\n  function createImageCard(image) {\n    const card = document.createElement('div');\n    card.classList.add('photo-card');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    img.loading = 'lazy';\n\n    const info = document.createElement('div');\n    info.classList.add('info');\n\n    const likes = createInfoItem('Likes', image.likes);\n    const views = createInfoItem('Views', image.views);\n    const comments = createInfoItem('Comments', image.comments);\n    const downloads = createInfoItem('Downloads', image.downloads);\n\n    info.appendChild(likes);\n    info.appendChild(views);\n    info.appendChild(comments);\n    info.appendChild(downloads);\n\n    card.appendChild(img);\n    card.appendChild(info);\n\n    return card;\n  }\n\n  function createInfoItem(label, value) {\n    const item = document.createElement('p');\n    item.classList.add('info-item');\n    item.innerHTML = `<b>${label}</b> <span>${value}</span>`;\n\n    \n    const textWidth = item.getBoundingClientRect().width;\n\n    \n    item.style.maxWidth = `${textWidth}px`;\n\n    return item;\n  }\n\n  function showLoadMoreButton(currentCount) {\n    if (currentCount >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      if (currentCount > 0) {\n        showNotification(\"We're sorry, but you've reached the end of search results.\");\n      }\n    } else {\n      loadMoreBtn.style.display = 'flex';\n    }\n  }\n  \n\n  function showNotification(message) {\n    Notiflix.Notify.failure(message);\n  }\n});"],"names":["document","addEventListener","form","getElementById","gallery","querySelector","loadMoreBtn","currentPage","currentSearchQuery","totalHits","async","searchImages","query","page","url","encodeURIComponent","response","axios","get","data","hits","length","innerHTML","showNotification","forEach","image","card","createElement","classList","add","img","src","webformatURL","alt","tags","loading","info","likes","createInfoItem","views","comments","downloads","appendChild","createImageCard","currentCount","style","display","error","console","label","value","item","textWidth","getBoundingClientRect","width","maxWidth","message","Notiflix","Notify","failure","e","preventDefault","searchQuery","target","elements","trim"],"version":3,"file":"index.30a19004.js.map"}